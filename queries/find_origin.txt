USE RepublicDatabaseAutoservice
GO

DECLARE @region NVARCHAR(20) = NULL
DECLARE @district NVARCHAR(20) = NULL
DECLARE @city NVARCHAR(20) = NULL

DECLARE @brand NVARCHAR(20) = NULL
DECLARE @model NVARCHAR(50) = NULL

DECLARE @category NVARCHAR(20) = NULL

DECLARE @age INTEGER = NULL
DECLARE @country NVARCHAR(30) = NULL

SELECT
	A.service_name AS "Название", 
	A.service_location AS "Координаты",
	R.region_title AS "Область",
	D.district_title  AS "Район",
	C.city_title AS "Город"
FROM Autoservice A
INNER JOIN Address Addr 
	ON A.address_id = Addr.address_id	
JOIN dbo.Region R
	ON Addr.region_id = R.region_id
JOIN dbo.District D
	ON Addr.region_id = D.region_id
JOIN dbo.City C
	ON Addr.city_id = C.city_id
JOIN WorkCategory WC
	ON A.service_id = WC.service_id
JOIN Category Ctgr
	ON Ct.category_id = WC.category_id
WHERE (@region IS NULL OR R.region_title = @region)
	AND (@district IS NULL D.district_title = @district)
	AND (@city IS NULL OR C.city_title = @city)
	AND (@category IS NULL OR Ctgr.category_name = @category)				 
ORDER BY A.service_name	

GO
